<!DOCTYPE html>
<html lang="zh">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <title>AutekInfo</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/jquery-easyui-1.4.3/themes/default/css")
    @Styles.Render("~/Content/autek/Style/css")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/blockUI")
    @Scripts.Render("~/bundles/homemenu")   
    <script type="text/javascript">       
    $(function(){
        jQuery("#RightAccordion").accordion({ //初始化accordion
            fillSpace:true,
            fit:true,
            border:false
           // animate:false  
        });
        
        $.post("/Home/GetTopMenu", 
            { "id": "0" }, //获取第一层目录
           function (data) {              
               if (!data) {
                   window.location = "/Account";
               }
               $.each(data, function (i, e) {//循环创建手风琴的项
                   var id = e.menu_id;
                   $('#RightAccordion').accordion('add', {
                       title: '&nbsp;' + e.menu_name,
                       content: "<ul id='tree" + id + "' style='padding-left:0px;' ></ul>",
                       selected: true,
                       iconCls: e.menu_icon
                   });
                 //$.parser.parse();
                   $.post("/Home/GetTreeMenu?menu_pid=" + id,
                       function (data) {//循环创建树的项                          
                       $("#tree" + id).tree({
                           data: data,
                           onBeforeExpand: function (node, param) {                               
                             $("#tree" + id).tree('options').url = "/Home/GetTreeMenu?menu_pid=" + node.id;                               
                           },   
                           onClick: function (node) {                               
                               if (node.attributes.length == 0) {
                                   $(this).tree('toggle', node.target);
                               } else {
                                   var tabTitle = node.text;
                                   var url = node.attributes;
                                   var icon = node.iconCls;
                                   addTab(tabTitle, url, icon);
                               }
                           }
                       });
                   }, 'json');
               });
           }, "json");
    });
    function sall() {
        $('#dl').datalist('selectAll');
    }
    function notall() {
        $('#dl').datalist('unselectAll');
    }
    function selectemp(dept, key) {
        $('#dl').datalist('load', {
            emp_dept: dept,
            keyw: key
        });
    }
    </script>

</head>
<body class="easyui-layout">
    <div data-options="region:'north',border:false,split:true" style="height: 60px; overflow:hidden;">
        <div class="define-head">
           

                    <img src="~/Content/autek/Images/logo.png" />
                </div>

            </div>
    </div>
    <div data-options="region:'west',split:true,title:'&nbsp;&nbsp;菜单列表',iconCls:'pic pic_196'" style=" width: 200px; height:100%;">
        <div id="RightAccordion" class="easyui-accordion">
        </div>
    </div>
    <div data-options="region:'south',border:false" style="height: 20px;">
        <div class="define-bottom">


        </div>
    </div>
    <div data-options="region:'center',border:false">
        <div id="mainTab" class="easyui-tabs" data-options="fit:true">
            <div title="我的桌面" data-options="closable:true" style="overflow: hidden; background:#fff">
              
                
                  <iframe scrolling="auto" frameborder="0" src="" style="width: 100%; height: 100%;"></iframe>
            </div>
        </div>
    </div>
    <div id="tab_menu" class="easyui-menu" style="width: 150px;">
        <div id="tab_menu-tabrefresh" data-options="iconCls:'icon-reload'">
            刷新
        </div>
        <div id="tab_menu-openFrame">
            在新的窗体打开
        </div>
        <div id="tab_menu-tabcloseall">
            关闭所有
        </div>
        <div id="tab_menu-tabcloseother">
            关闭其他标签页
        </div>
        <div class="menu-sep">
        </div>
        <div id="tab_menu-tabcloseright">
            关闭右边
        </div>
        <div id="tab_menu-tabcloseleft">
            关闭左边
        </div>
        <div id="tab_menu-tabclose" data-options="iconCls:'icon-remove'">
            关闭
        </div>
        <div id="menu" class="easyui-menu" style="width: 150px;">
        </div>
    </div>
    <div id="dd" style="padding:2px;">
        <div>
            请输入关键字查询：<input id="ss" style="width:300px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <b>从列表中选择：</b> <a href="javascript:sall()">[全选]</a> &nbsp;&nbsp; <a href="javascript:notall()">[不选]</a>
        </div>
        <div style="float:left;">
            <ul id="depttree"></ul>
        </div>
        <div style="float:right;width:360px;height:500px">
            <div id="dl">
            </div>

        </div>

    </div>
</body>
</html>
